(this["webpackJsonptwo-cat"]=this["webpackJsonptwo-cat"]||[]).push([[0],{51:function(t,e,i){"use strict";i.r(e);var s=i(7),r=i(1),a=i(16),n=i(17),c=i(19),d=i(18),l=i(0),o=i.n(l),u=i(47),h=i.n(u),p=(i(57),i(49)),v=i(2),j=i(48),L=i.n(j);function f(t){var e=(t.isSelected?"isSelected ":"").concat(t.suit);return Object(r.jsx)("div",{className:"cardHolder",children:Object(r.jsx)("button",{className:e+" card",id:t.id,onClick:t.onClick,children:Object(r.jsx)("img",{src:"/two-cat/images/"+t.name+".jpg",alt:t.name})})})}var b=function(t){Object(c.a)(i,t);var e=Object(d.a)(i);function i(t){var s;return Object(a.a)(this,i),(s=e.call(this,t)).state={cardList:s.props.cardList,selectedList:Array(s.props.cardList.length).fill(!1)},s}return Object(n.a)(i,[{key:"renderCard",value:function(t){var e=this;return Object(r.jsx)("li",{children:Object(r.jsx)(f,{id:this.props.cardList[t].id,name:this.props.cardList[t].name,value:this.props.cardList[t].value,suit:this.props.cardList[t].suit,image:this.props.cardList[t].name,isSelected:this.props.cardList[t].isSelected,onClick:function(){return e.props.onClick(e.props.playerid,t)}})},"Card".concat(this.props.cardList[t].id))}},{key:"renderHand",value:function(){var t,e=this.props.cardList.slice(),i=[];for(t=0;t<e.length;t++)i.push(this.renderCard(t));return i}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"hand",playerid:this.props.playerid,children:Object(r.jsx)("ul",{children:this.renderHand()})})}}]),i}(o.a.Component),m=function(t){Object(c.a)(i,t);var e=Object(d.a)(i);function i(t){var s;return Object(a.a)(this,i),(s=e.call(this,t)).state={cardList:s.props.cardList,count:s.props.count},s}return Object(n.a)(i,[{key:"renderCard",value:function(t){return Object(r.jsx)("li",{children:Object(r.jsx)(f,{id:this.props.cardList[t].id,name:this.props.cardList[t].name,value:this.props.cardList[t].value,suit:this.props.cardList[t].suit,image:this.props.cardList[t].name,isSelected:this.props.cardList[t].isSelected,onClick:function(){return null}})},"Card".concat(this.props.cardList[t].id))}},{key:"renderPile",value:function(){var t,e=this.props.cardList.slice(),i=[];for(t=0;t<e.length;t++)i.push(this.renderCard(t));return i}},{key:"render",value:function(){var t=this,e=this.props.suit+" pile";return Object(r.jsxs)("div",{className:e,pileid:this.props.pileid,onClick:function(){return t.props.onClick(t.props.pileid)},children:[Object(r.jsx)("div",{className:"pileNameHolder",children:this.props.suit+" : "+this.props.count}),Object(r.jsx)("ul",{children:this.renderPile()})]})}}]),i}(o.a.Component),O=function(t){Object(c.a)(i,t);var e=Object(d.a)(i);function i(t){var s;return Object(a.a)(this,i),(s=e.call(this,t)).state={cardList:s.props.cardList,count:s.props.count},s}return Object(n.a)(i,[{key:"renderCard",value:function(t){return Object(r.jsx)("li",{children:Object(r.jsx)(f,{id:this.props.cardList[t].id,name:this.props.cardList[t].name,value:this.props.cardList[t].value,suit:this.props.cardList[t].suit,image:this.props.cardList[t].name,isSelected:this.props.cardList[t].isSelected})},"Card".concat(this.props.cardList[t].id))}},{key:"renderDiscard",value:function(){var t,e=this.props.cardList.slice(),i=[];for(t=0;t<e.length;t++)i.push(this.renderCard(t));return i}},{key:"render",value:function(){var t=this.props.discardid+" discard";return Object(r.jsxs)("div",{className:t,discardid:this.props.discardid,children:[Object(r.jsx)("div",{className:"discardNameHolder",children:"Player "+String(this.props.discardid)+" Discard"}),Object(r.jsx)("ul",{children:this.renderDiscard()}),Object(r.jsx)("div",{className:"discardCountHolder",children:"Count: "+String(this.props.count)})]})}}]),i}(o.a.Component),y=function(t){Object(c.a)(i,t);var e=Object(d.a)(i);function i(){return Object(a.a)(this,i),e.apply(this,arguments)}return Object(n.a)(i,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"gameBoard",children:[Object(r.jsx)("div",{className:"pileList",children:Object(r.jsx)("ul",{children:this.props.renderPileList()})}),Object(r.jsx)("div",{className:"handList",children:Object(r.jsx)("ul",{children:this.props.renderHandList()})}),Object(r.jsx)("div",{className:"discardList",children:Object(r.jsx)("ul",{children:this.props.renderDiscardList()})})]})}}]),i}(o.a.Component),x=function(t){Object(c.a)(i,t);var e=Object(d.a)(i);function i(t){var s;return Object(a.a)(this,i),(s=e.call(this,t)).state={name:"twocat",activePlayer:0,winner:null,roundNumber:0,roundScores:Array(4).fill(Array(4).fill(0)),suitList:["Cat","Mirror","Ladder"],overflowNumber:14,numberList:[1,1,1,2,2,2,4,4,5,5,5,7,7,7],numWilds:8,wildValue:4,maxRounds:4,wildPoints:2,handList:null,pileList:null,discardList:null,selectedCard:{handIndex:null,cardIndex:null}},s.socket=L()("localhost:5000"),s.socket.on("UPDATE_STATE",(function(t){console.log("UPDATE STATE ON 237"),s.setState(t)})),s}return Object(n.a)(i,[{key:"componentWillUnmount",value:function(){this.socket.emit("REMOVE_PLACE",this.state.name)}},{key:"handlePileClick",value:function(t){var e=this.state.selectedCard,i=this.state.activePlayer;if(null!=e.cardIndex&&null!=e.handIndex&&e.handIndex===i){var r=e.handIndex,a=e.cardIndex,n=this.state.handList.slice(),c=n[r].slice(),d=c[a],l=this.state.pileList.slice(),o=l[t],u=o.cardList.slice(),h=this.state.discardList.slice();if(d.suit===o.suit||"Wild"===d.suit){d=c.splice(a,1)[0],n[r]=c;var p=o.count;p+d.value<this.state.overflowNumber?(u.push(d),p+=d.value):(h[r].cardList=u.concat(h[r].cardList),h[r].count+=u.length,u=[d],p=d.value),o.cardList=u,o.count=p,l[t]=o,e={handIndex:null,cardIndex:null};var v=Object(s.a)(Object(s.a)({},this.state),{},{pileList:l,discardList:h,handList:n,selectedCard:e});this.socket.emit("CHANGE_STATE",v),this.handleTurnEnd(n,h)}}}},{key:"handleHandClick",value:function(t,e){var i=this.state.handList.slice();if(t===this.state.activePlayer){var r=this.state.selectedCard;null!=r.cardIndex&&null!=r.handIndex&&(i[r.handIndex][r.cardIndex].isSelected=!1);var a=i[t].slice();a[e].isSelected=!0,r={handIndex:t,cardIndex:e},i[t]=a;var n=Object(s.a)(Object(s.a)({},this.state),{},{handList:i,selectedCard:r});this.socket.emit("CHANGE_STATE",n)}}},{key:"renderHand",value:function(t){var e=this,i=t===this.state.activePlayer?"active-player":"inactive-player",s="handHolder".concat(" ").concat(i);return Object(r.jsx)("li",{className:"hand",children:Object(r.jsx)("div",{className:s,children:Object(r.jsx)(b,{className:i,playerid:t,cardList:this.state.handList[t],onClick:function(t,i){return e.handleHandClick(t,i)}})})},"Hand".concat(String(t)))}},{key:"renderPile",value:function(t){var e=this;return Object(r.jsx)("li",{className:"pile",children:Object(r.jsx)("div",{className:"pileHolder",children:Object(r.jsx)(m,{pileid:t,suit:this.state.pileList[t].suit,count:this.state.pileList[t].count,cardList:this.state.pileList[t].cardList,onClick:function(t){return e.handlePileClick(t)}})})},"Pile".concat(String(t)))}},{key:"renderDiscard",value:function(t){return Object(r.jsx)("li",{className:"discard",children:Object(r.jsx)("div",{className:"discardHolder",children:Object(r.jsx)(O,{discardid:t,count:this.state.discardList[t].count,cardList:this.state.discardList[t].cardList})})},"Discard".concat(String(t)))}},{key:"renderPileList",value:function(){var t,e=[];if(null!==this.state.pileList)for(t=0;t<this.state.pileList.length;t++)e.push(this.renderPile(t));return e}},{key:"renderHandList",value:function(){var t,e=[];if(null!==this.state.handList)for(t=0;t<this.state.handList.length;t++)e.push(this.renderHand(t));return e}},{key:"renderDiscardList",value:function(){var t,e=[];if(null!==this.state.discardList)for(t=0;t<this.state.discardList.length;t++)e.push(this.renderDiscard(t));return e}},{key:"checkWinner",value:function(){var t,e,i=[0,0,0,0];for(t=0;t<this.state.roundScores.length;t++)for(e=0;e<this.state.roundScores[t].length;e++)i[e]+=this.state.roundScores[t][e];return i.indexOf(Math.max.apply(null,i))}},{key:"handleTurnEnd",value:function(t,e){var i,r=t.slice(),a=e.slice(),n=!0;for(i=0;i<r.length;i++)r[i].length>0&&(n=!1);!0===n&&this.handleRoundEnd(a);var c=this.state.activePlayer;c=(c+1)%r.length;var d=Object(s.a)(Object(s.a)({},this.state),{},{activePlayer:c});this.socket.emit("CHANGE_STATE",d)}},{key:"handleRoundEnd",value:function(t){var e,i,r,a=this.state.roundNumber,n=this.state.roundScores.slice(),c=n[a].slice(),d=t.slice(),l=this.state.suitList.slice(),o=Array(l.length).fill({mostCards:0,player:-1}),u=Array(l.length).fill(Array(d.length).fill(0)),h=Array(d.length).fill(0);for(i=0;i<d.length;i++){for(;d[i].cardList.length>0;)"Wild"===(e=d[i].cardList.pop()).suit?h[i]+=this.state.wildPoints:u[l.indexOf(e.suit)][i]+=1;for(r=0;r<o.length;r++)u[r][i]>o[r].mostCards?(o[r].mostCards=u[r][i],o[r].player=i):u[r][i]===o[r].mostCards&&(o[r].player=-1)}for(i=0;i<c.length;i++)for(c[i]+=h[i],r=0;r<u.length;r++)c[i]+=u[r][i];for(i=0;i<o.length;i++)o[i].player>=0&&(c[o[i].player]-=o[i].mostCards);var p=this.state.winner;a>=this.state.maxRounds-1&&(p=this.checkWinner());var v=this.state.activePlayer-1;n[a]=c,a+=1;var j=Object(s.a)(Object(s.a)({},this.state),{},{activePlayer:v,roundNumber:a,roundScores:n,winner:p});this.socket.emit("CHANGE_STATE",j),null===p&&this.resetBoard()}},{key:"initializeDeck",value:function(){var t,e,i=[],s=this.state.suitList.slice(),r=this.state.numberList.slice();for(t=0;t<s.length;t++)for(e=0;e<r.length;e++)i.push({id:null,name:String(r[e])+" "+s[t],value:r[e],suit:s[t],isSelected:!1});for(t=0;t<this.state.numWilds;t++)i.push({id:null,name:String(this.state.wildValue)+" Wild",value:this.state.wildValue,suit:"Wild",isSelected:!1});for(t=0;t<i.length;t++)i[t].id=t;return i}},{key:"shuffleDeck",value:function(t){for(var e=[],i=0;t.length>0;)i=Math.floor(Math.random()*t.length),e.push(t.splice(i,1)[0]);return e}},{key:"dealCards",value:function(t){for(var e=[[],[],[],[]],i=this.state.roundNumber;t.length>0;)e[i].push(t.pop()),i=(i+1)%4;return e}},{key:"initializePiles",value:function(){return[{name:"CatPile",suit:"Cat",count:0,cardList:[]},{name:"MirrorPile",suit:"Mirror",count:0,cardList:[]},{name:"LadderPile",suit:"Ladder",count:0,cardList:[]}]}},{key:"initializeDiscards",value:function(){return[{count:0,cardList:[]},{count:0,cardList:[]},{count:0,cardList:[]},{count:0,cardList:[]}]}},{key:"resetBoard",value:function(){var t=this.initializeDeck(),e=this.shuffleDeck(t.slice()),i=this.dealCards(e),r=Object(s.a)(Object(s.a)({},this.state),{},{handList:i,pileList:this.initializePiles(),discardList:this.initializeDiscards()});this.socket.emit("CHANGE_STATE",r)}},{key:"render",value:function(){var t=this;null===this.state.handList&&this.resetBoard();var e=this.state.winner;return Object(r.jsxs)("div",{className:"board",children:[Object(r.jsxs)("h2",{children:["Active Player: ",this.state.activePlayer+1]}),Object(r.jsxs)("h3",{children:["ScoreList [Round ",this.state.roundNumber+1,"]: "]}),this.state.roundScores.map((function(e,i){return i<=t.state.roundNumber&&Object(r.jsx)("h3",{children:e.map((function(t,e){return Object(r.jsxs)("span",{children:[t,"   "]},"Score".concat(e))}))},"RoundScores".concat(i))})),Object(r.jsx)(y,{playerHandList:this.state.handList,pileList:this.state.pileList,discardList:this.state.discardList,activePlayer:this.state.activePlayer,suitOrder:this.state.suitList,overflowNumber:this.state.overflowNumber,onTurnEnd:function(e,i){return t.handleTurnEnd(e,i)},renderPileList:function(){return t.renderPileList()},renderHandList:function(){return t.renderHandList()},renderDiscardList:function(){return t.renderDiscardList()}}),e>0&&Object(r.jsxs)("h2",{children:["Congratualtions, Player ",this.state.winner+1," "]})]})}}]),i}(o.a.Component);h.a.render(Object(r.jsx)(p.a,{onUpdate:function(){return window.scrollTo(0,0)},children:Object(r.jsx)(v.a,{path:"/",component:x})}),document.getElementById("root"))},57:function(t,e,i){}},[[51,1,2]]]);
//# sourceMappingURL=main.95938348.chunk.js.map